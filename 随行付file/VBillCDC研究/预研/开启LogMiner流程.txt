shutdown immediate;

startup mount;

alter database archivelog;
alter system set log_archive_start=true scope=spfile;//重启数据库

alter database open;

archive log list;

alter database force logging;

@D:\oracle\product\10.2.0\RDBMS\ADMIN\dbmslm.sql
@D:\oracle\product\10.2.0\RDBMS\ADMIN\dbmslmd.sql

@D:\Oracle\product\11.2.0\RDBMS\ADMIN\dbmslm.sql
@D:\Oracle\product\11.2.0\RDBMS\ADMIN\dbmslmd.sql

EXECUTE DBMS_LOGMNR_D.SET_TABLESPACE('TONG');

ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;

读取在线日志
EXECUTE dbms_logmnr.add_logfile(logfilename=>'D:\Oracle\oradata\oracle\REDO03.LOG',options=>dbms_logmnr.NEW);
EXECUTE dbms_logmnr.add_logfile(logfilename=>'D:\Oracle\oradata\oracle\REDO01.LOG',options=>dbms_logmnr.ADDFILE);
EXECUTE dbms_logmnr.add_logfile(logfilename=>'D:\Oracle\oradata\oracle\REDO02.LOG',options=>dbms_logmnr.ADDFILE);

EXECUTE dbms_logmnr.start_logmnr(OPTIONS => DBMS_LOGMNR.DICT_FROM_ONLINE_CATALOG);

select sql_redo, sql_undo from v$logmnr_contents WHERE SEG_OWNER='TONG';
select SCN, CSCN, TIMESTAMP, COMMIT_TIMESTAMP, SEG_OWNER, SEG_NAME, TABLE_NAME, SEG_TYPE, SEG_TYPE_NAME, USERNAME, OPERATION, OPERATION_CODE, SSN, CSF, STATUS, SQL_REDO
from v$logmnr_contents WHERE SEG_OWNER='TONG' AND TABLE_NAME='MINER_TEST' AND (OPERATION='INSERT' OR OPERATION='UPDATE');

EXECUTE sys.dbms_logmnr.end_logmnr;



select SUPPLEMENTAL_LOG_DATA_ALL,
       SUPPLEMENTAL_LOG_DATA_FK,
       SUPPLEMENTAL_LOG_DATA_UI,
       SUPPLEMENTAL_LOG_DATA_MIN
  from V$DATABASE;

select * from DBA_LOG_GROUPS;
select * from ALL_LOG_GROUPS;
select * from USER_LOG_GROUPS;

select * from DBA_LOG_GROUP_COLUMNS;
select * from ALL_LOG_GROUP_COLUMNS;
select * from USER_LOG_GROUP_COLUMNS;