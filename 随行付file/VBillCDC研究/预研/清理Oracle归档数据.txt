1.进入RMAN/连接RMAN的方法

rman target sys/oracle nocatalog
注:sys/oracle中德sys为系统用户；oracle为用户的密码。


2.ORACLE正确删除归档并回收空间的方法

一个ORACLE归档日志经常满，表现为/oraarchive 这个文件空间占用100％大家一定抱怨ORACLE为何没有归档维护工具，很多人直接删除了事，错了，ORACLE有，而且很智能，可以正确的删除归档和FLASHBACK，不过切记,ORACLE归档日志对于ORACLE的数据恢复和备份非常重要，不到万不得已不要删除归档日志。

进入ORACLE数据备份工具
rman target/或rman target/@orcl

在命令窗口里面执行
DELETE ARCHIVELOG ALL COMPLETED BEFORE 'SYSDATE-7'
DELETE ARCHIVELOG ALL COMPLETED BEFORE 'SYSDATE'
说明：
SYSDATA-7，表明当前的系统时间7天前，before关键字表示在7天前的归档日志，如果使用了闪回功能，也会删除闪回的数据。

UNIX/LINUX下也可以通过FIND找到7天前的归档数据，使用EXEC子操作删除
find /oraarchive -xdev -mtime +7 -name "*.dbf" -exec rm -f {} ;
这样做仍然会在RMAN里留下未管理的归档文件
仍需要在RMAN里执行下面2条命令
crosscheck archivelog all;
delete expired archivelog all;

3.关闭Oracle归档模式
ALTER DATABASE NOARCHIVELOG;

4.修改Oracle归档路径
通过下面的SQL查看闪回恢复区的信息
show parameter db_recover;
也可以通过查询v$recovery_file_dest视图查看闪回恢复的限制信息
select name,SPACE_LIMIT,SPACE_USED from v$recovery_file_dest;
默认情况下，归档日志会存放到闪回恢复区（D:\oracle\flash_recovery_area）内，如果闪回恢复区已经使用到2G，归档日志就有可能无法继续归档，数据库夯住，通常的解决方法是增大闪回恢复区，可以用以下SQL实现。
alter system set db_recovery_file_dest_size=3G;
即使用这种方法解决的当前燃眉之急，虽然闪回恢复区ORACLE会自动管理，如果闪回恢复区空间不足就会清理掉没用的数据，但是如果备份策略不是很完善，数据库非常繁忙的情况下，还有可能遇到这种情况，通常需要修改归档日志的路径，将归档日志放到其他不受限制的路径下来解决这个问题，可通过下面的SQL来修改归档日志的存放路径。
alter system set db_recovery_file_dest='D:\Oracle\flash_recovery_area\oracle\ARCHIVELOG';
然后将数据库启动到MOUNT状态，将数据库修改为归档模式后建数据库启动到OPEN状态。

5.开启LogMiner日志补充模式

--创建数据字典文件
CREATE DIRECTORY utlfile AS 'D:\Oracle\flash_recovery_area\oracle\DICTIONARY';
alter system set utl_file_dir='D:\Oracle\flash_recovery_area\oracle\DICTIONARY' scope=spfile;

alter database drop supplemental log data (all) columns;
--创建数据字典文件
alter database add supplemental log data;
--修改完毕后，关闭数据库，以MOUNT方式启动
SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
SHOW PARAMETER utl_file_dir;
alter database open;

6.创建数据字典：
EXECUTE dbms_logmnr_d.build(dictionary_filename => 'dictionary.ora', dictionary_location =>'D:\Oracle\flash_recovery_area\oracle\DICTIONARY');


7.把在线重做日志变成归档日志，这样分析归档日志就可以了
alter system switch logfile;

